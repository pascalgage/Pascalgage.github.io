<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TPcereals</title>
    <link rel="stylesheet" href="./assets/css/main.css">
    <script src="./assets/js/vue.global3.2.22.js" defer></script>
    <script src="./assets/js/main.js" type="module"></script>
</head>

<body>
    <div id="app">
        <header>
            <h2>CEREALS</h2>
            <div class="searchelements">
                
                <fieldset class="search">
                    <legend>Rechercher</legend>
                    
                    <input @input="searchInput" type="search" placeholder="Nom du céréale"/>
                    
                    
                </fieldset>
            
                <fieldset class="filter">
                    <legend>Filtrer</legend>
                    <fieldset class="nutriscore">
                        <legend>Nutriscore</legend>
                        A <input type="checkbox" @click="nutriSelect" data-name="A" checked> 
                        B <input type="checkbox" @click="nutriSelect" data-name="B" checked> 
                        C <input type="checkbox" @click="nutriSelect" data-name="C" checked> 
                        D <input type="checkbox" @click="nutriSelect" data-name="D" checked> 
                        E <input type="checkbox" @click="nutriSelect" data-name="E" checked>
                    </fieldset>
                    <fieldset>
                        <legend>Catégorie</legend>
                        <select @change="changeCat">
                            <option value="1">Tous</option>
                            <option value="2">Sans sucre</option>
                            <option value="3">Pauvre en sel</option>
                            <option value="4">Boost</option>
                        </select>
                    </fieldset>
                </fieldset>
            </div>
        </header>
        <table>

            <thead>
                <tr>
                    <th @click="columnClick" data-column="id">ID</th>
                    <th @click="columnClick" data-column="name">NOM</th>
                    <th @click="columnClick" data-column="calories" class="calorie">CALORIES</th>
                    <th @click="columnClick" data-column="protein">PROTEINES</th>
                    <th @click="columnClick" data-column="sodium">SEL</th>
                    <th @click="columnClick" data-column="fiber">FIBRES</th>
                    <th @click="columnClick" data-column="carbo">GLUCIDES</th>
                    <th @click="columnClick" data-column="sugars">SUCRE</th>
                    <th @click="columnClick" data-column="potass">POTASSIUM</th>
                    <th @click="columnClick" data-column="vitamins">VITAMINES</th>
                    <th @click="columnClick" data-column="rating">EVALUATION</th>
                    <th>NS</th>
                    <th>DEL</th>
                </tr>
            </thead>

            <tbody>
                <tr v-for="cereal of cereals">
                    <td>{{ cereal.id }}</td>
                    <td>{{ cereal.name }}</td>
                    <td id="cal">{{ cereal.calories }}</td>
                    <td>{{ cereal.protein }}</td>
                    <td>{{ cereal.sodium }}</td>
                    <td>{{ cereal.fiber }}</td>
                    <td>{{ cereal.carbo }}</td>
                    <td>{{ cereal.sugars }}</td>
                    <td>{{ cereal.potass }}</td>
                    <td>{{ cereal.vitamins }}</td>
                    <td>{{ cereal.rating }}</td>
                    <td :class="cereal.nutriscore">{{ cereal.nutriscore }}</td>
                    <td><a :data-id="cereal.id" @click="eraseLine" class="eraseButton">❌</a></td>
                </tr>
                
            </tbody>
            <tfoot>
                <!--On souhaite ajouter une ligne de calcul pour le total des éléments-->
                <tr>
                    <td colspan="2">{{totalElements}}</td>
                    <td>{{calorieMoy}}</td>
                    <td colspan="10"></td>
                </tr>
            </tfoot>

        </table>



    </div>
</body>

</html>
